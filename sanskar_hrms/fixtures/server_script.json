[
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Delete",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-02-27 15:25:05.484344",
  "module": "Sanskar HRMS",
  "name": "Change Job Applicant status when interview is deleted",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Interview",
  "script": "# try:\ninterview_exists = frappe.db.exists(\"Interview\", {\"job_applicant\": doc.job_applicant, \"docstatus\": [\"!=\", 2]})\n\n# frappe.msgprint(str(interview_exists))\n\nif interview_exists:\n    job_applicant = frappe.db.get_value('Interview',interview_exists,['job_applicant'])\n    prev_status = frappe.db.get_value('Interview',interview_exists,['status'])\n    prev_round = frappe.db.get_value('Interview',interview_exists,['interview_round'])\n    \n    prev_status_string = f\"{prev_round} - {prev_status}\"\n    \n    frappe.db.set_value('Job Applicant', job_applicant, 'status', prev_status_string)\n    frappe.db.set_value('Job Applicant', job_applicant, 'custom_interview_round', prev_round)\n    frappe.db.set_value('Job Applicant', job_applicant, 'custom_interview_status', prev_status) \n    \n\nelse:\n    frappe.db.set_value('Job Applicant', doc.job_applicant, 'status', 'Telephonic Round - Approved by HR')\n    frappe.db.set_value('Job Applicant', doc.job_applicant, 'custom_interview_round', 'Telephonic Round')\n    frappe.db.set_value('Job Applicant', doc.job_applicant, 'custom_interview_status', 'Approved by HR')\n        \n# except Exception as e:\n#     # Code to handle any other exception\n#     pass",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Save",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-02-27 15:25:05.400012",
  "module": "Sanskar HRMS",
  "name": "Update Job Applicant Status",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Job Applicant",
  "script": "job_applicant_status = f\"{doc.custom_interview_round} - {doc.custom_interview_status}\"\n# frappe.msgprint(f\"{interview_round}-{interview_status}  {job_applicant}\")\nif doc.custom_interview_round == 'Telephonic Round':\n    frappe.db.set_value('Job Applicant', doc.name, 'status', job_applicant_status)\n    doc.reload()\n# frappe.msgprint(f\"{job_applicant_status}\")\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": "mail to hr",
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-02-27 15:25:05.430869",
  "module": "Sanskar HRMS",
  "name": "New Job Applicant Mail to HR",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": null,
  "script": "user_name = frappe.form_dict['current_user']\njob_applicant = frappe.form_dict['job_applicant']\njob_title = frappe.form_dict['job_title']\nemail_id = frappe.form_dict['email_id']\nphone_number = frappe.form_dict['phone_number']\ndoc_link = frappe.form_dict['link']\n\n\n\n\nemployee = frappe.db.get_value('Employee', {'user_id': user_name}, ['reports_to'])\n\nsnr_employee = frappe.db.get_value('Employee', employee, ['user_id'], as_dict=1)\nmail_subject = f\"New Job Applicantion Form {job_applicant}\"\n\n\nfrappe.sendmail(\n                    recipients = snr_employee.user_id,\n                    subject=mail_subject,\n                    template = 'new_job_application',\n                    args = dict(\n                        job_applicant = job_applicant,\n                        job_title = job_title,\n                        email_id = email_id,\n                        phone_number = phone_number,\n                        doc_link = doc_link\n                        \n                        )\n                )\n\nfrappe.response['user_name'] = user_name\n# frappe.response['employee_id'] = employee.user_id\nfrappe.response['reports_to'] = employee\nfrappe.response['snr_employee'] = snr_employee.user_id\nfrappe.response['job_applicant'] = job_applicant\n\n\n\n\n\n",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Submit",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-02-27 15:25:05.447885",
  "module": "Sanskar HRMS",
  "name": "Job Applicant status update on job offer",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Job Offer",
  "script": "\nif doc.status == \"Accepted\" or doc.status == \"Rejected\":\n        frappe.db.set_value('Job Applicant', doc.job_applicant, 'status', doc.status)\n        frappe.db.set_value('Job Applicant', doc.job_applicant, 'custom_interview_round', doc.status)",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Cancel",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-02-27 15:25:05.466178",
  "module": "Sanskar HRMS",
  "name": "Update Job Applicant status when job offer is cancelled",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Job Offer",
  "script": "frappe.db.set_value('Job Applicant', doc.job_applicant, 'status', 'Final Round - Cleared')\nfrappe.db.set_value('Job Applicant', doc.job_applicant, 'custom_interview_round', 'Final Round')\nfrappe.db.set_value('Job Applicant', doc.job_applicant, 'custom_interview_status', 'Cleared')\n\n\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Cancel",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-02-27 15:25:05.499664",
  "module": "Sanskar HRMS",
  "name": "Change job applicant status when interview is cancelled",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Interview",
  "script": "# try:\ninterview_exists = frappe.db.exists(\"Interview\", {\"job_applicant\": doc.job_applicant, \"docstatus\": [\"!=\", 2]})\n\n# frappe.msgprint(str(interview_exists))\n\nif interview_exists:\n    job_applicant = frappe.db.get_value('Interview',interview_exists,['job_applicant'])\n    prev_status = frappe.db.get_value('Interview',interview_exists,['status'])\n    prev_round = frappe.db.get_value('Interview',interview_exists,['interview_round'])\n    \n    prev_status_string = f\"{prev_round} - {prev_status}\"\n    \n    frappe.db.set_value('Job Applicant', job_applicant, 'status', prev_status_string)\n    frappe.db.set_value('Job Applicant', job_applicant, 'custom_interview_round', prev_round)\n    frappe.db.set_value('Job Applicant', job_applicant, 'custom_interview_status', prev_status) \n    \n\nelse:\n    frappe.db.set_value('Job Applicant', doc.job_applicant, 'status', 'Telephonic Round - Approved by HR')\n    frappe.db.set_value('Job Applicant', doc.job_applicant, 'custom_interview_round', 'Telephonic Round')\n    frappe.db.set_value('Job Applicant', doc.job_applicant, 'custom_interview_status', 'Approved by HR')\n        \n# except Exception as e:\n#     # Code to handle any other exception\n#     pass",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Save",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-02-27 15:25:05.515457",
  "module": "Sanskar HRMS",
  "name": "Update Job applicant status When interview is saved",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Interview",
  "script": "status = doc.status\ninterview_round = doc.interview_round\njob_applicant = doc.job_applicant\n\n\nif status in ['Scheduled', 'Rescheduled', 'Task Given', 'Not Appeared']:\n    \n    status_string = f\"{interview_round} - {status}\"\n    \n    frappe.db.set_value('Job Applicant', job_applicant, 'status', status_string)\n    frappe.db.set_value('Job Applicant', job_applicant, 'custom_interview_round', interview_round)\n    frappe.db.set_value('Job Applicant', job_applicant, 'custom_interview_status', status)",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Submit",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-02-27 15:25:05.531539",
  "module": "Sanskar HRMS",
  "name": "Update Job applicant status When interview is submitted",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Interview",
  "script": "status = doc.status\ninterview_round = doc.interview_round\njob_applicant = doc.job_applicant\n\n\nif status in ['Cleared', 'Rejected']:\n    \n    status_string = f\"{interview_round} - {status}\"\n    \n    frappe.db.set_value('Job Applicant', job_applicant, 'status', status_string)\n    frappe.db.set_value('Job Applicant', job_applicant, 'custom_interview_round', interview_round)\n    frappe.db.set_value('Job Applicant', job_applicant, 'custom_interview_status', status)",
  "script_type": "DocType Event"
 }
]